<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Game with Random Signs (Stroke Only While Playing)</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background-color: black;
      color: #FAFAFA;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start; /* So we have room for the appended signs */
      height: 100vh;
      text-align: center;
    }

    h1 {
      margin: 1rem 0 0.5rem 0;
    }

    button {
      font-size: 1.2rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      background: #007BFF;
      color: white;
      transition: background 0.3s;
      margin-top: 1rem;
    }
    button:hover {
      background: #0056b3;
    }

    /* This element shows the CURRENT sign with stroke effect */
    #sign {
      margin-top: 2rem;
      font-size: 1.5rem;
      font-weight: bold;
      color: #fff;
      text-shadow:
        -1px 0 red,
         1px 0 red,
         0 -1px red,
         0  1px red;
      -webkit-text-stroke: 1px red;
      -webkit-text-fill-color: #fff;
      min-height: 2em; /* just to reserve some space even when empty */
    }

    /* Container for all previously played signs in plain white */
    #playedSigns {
      margin-top: 2rem;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }

    /* Plain white lines in the playedSigns area */
    #playedSigns p {
      margin: 0.5rem 0;
      color: #FAFAFA; /* no stroke, just white text */
      font-size: 1.2rem;
    }
  </style>
</head>
<body>
  <h1>Listen and Watch the Screen</h1>
  <button id="playBtn">Play / Stop</button>

  <!-- The current sign with stroke effect -->
  <div id="sign"></div>

  <!-- Container for previously displayed signs (plain white) -->
  <div id="playedSigns"></div>

  <!-- Single audio element -->
  <audio id="audioElement"></audio>

  <script>
    // 1) Possible sign texts
    const possibleSigns = [
      "That is embarrassing",
      "that isn’t my receipt",
      "lactates in pharmacy",
      "baptism piracy",
      "that isn’t parsley",
      "bart simpson bouncing",
      "rats eating pirate shit",
      "five, six, six, five or six",
      "that isn’t bouncing",
      "nazis in pirate ships",
      "that isn’t piracy",
      "Battles and Parasites"
    ];

    // 2) Audio playlist (just 4 clips)
    const audioPlaylist = [
      "audio/clip1.mp3",
      "audio/clip2.mp3",
      "audio/clip3.mp3",
      "audio/clip4.mp3"
    ];

    const audioEl = document.getElementById("audioElement");
    const signEl = document.getElementById("sign");
    const playBtn = document.getElementById("playBtn");
    const playedSignsContainer = document.getElementById("playedSigns");

    let chosenSigns = [];   // Will hold 4 random signs
    let currentIndex = 0;   // Which clip is currently playing
    let isFirstPlay = true; // So we only pick random signs once

    // Utility: shuffle array in-place (Fisher-Yates)
    function shuffleArray(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    // Pick 4 random signs & shuffle them so their order is random
    function pickRandomSigns() {
      const cloned = [...possibleSigns];
      shuffleArray(cloned);        // shuffle the big list
      const selected = cloned.slice(0, 4); // get first 4
      shuffleArray(selected);       // shuffle those 4 again if you want random order
      return selected;
    }

    function loadTrack(index) {
      if (index < audioPlaylist.length) {
        audioEl.src = audioPlaylist[index];
        // Show the sign with stroke effect
        signEl.textContent = chosenSigns[index];
      } else {
        // No more tracks
        audioEl.src = "";
        signEl.textContent = "";
      }
    }

    // 5) Handle Play button
    playBtn.addEventListener("click", () => {
      if (isFirstPlay) {
        // 1) pick random signs
        chosenSigns = pickRandomSigns();
        // 2) load the first track
        loadTrack(currentIndex);
        isFirstPlay = false;
      }
      // Start audio
      audioEl.play();
      playBtn.disabled = true;
    });

    // 6) After each clip ends, append that sign in plain white, then go to next
    audioEl.addEventListener("ended", () => {
      // Add the just-played sign to the #playedSigns container in plain text
      const p = document.createElement("p");
      p.textContent = chosenSigns[currentIndex];
      playedSignsContainer.appendChild(p);

      // Move on
      currentIndex++;
      if (currentIndex < audioPlaylist.length) {
        loadTrack(currentIndex);
        audioEl.play();
      } else {
        // No more clips - clear the current sign
        signEl.textContent = "";
      }
    });

    // 7) If user pauses, allow them to resume
    audioEl.addEventListener("pause", () => {
      playBtn.disabled = false;
    });
  </script>
</body>
</html>
